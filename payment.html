<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment - Premium Shop</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* TOUS LES CSS INT√âGR√âS */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; line-height: 1.6; }

        .header { background: white; padding: 1rem 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: fixed; width: 100%; top: 0; z-index: 1000; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: 700; color: #667eea; text-decoration: none; display: flex; align-items: center; gap: 10px; }
        .nav-list { display: flex; list-style: none; gap: 2rem; }
        .nav-link { text-decoration: none; color: #4a5568; font-weight: 500; transition: color 0.3s; }
        .nav-link:hover { color: #667eea; }

        .payment-section { min-height: 100vh; padding: 120px 20px 60px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .payment-container { max-width: 600px; margin: 0 auto; background: white; border-radius: 20px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
        .back-link { display: inline-flex; align-items: center; color: #667eea; text-decoration: none; font-weight: 500; margin-bottom: 20px; }
        .back-link:hover { color: #764ba2; }
        .payment-title { font-size: 2rem; font-weight: 700; color: #2d3748; margin-bottom: 10px; text-align: center; }
        .payment-subtitle { color: #718096; text-align: center; margin-bottom: 30px; font-size: 1rem; }

        .order-summary { background: #f7fafc; border-radius: 12px; padding: 20px; margin-bottom: 30px; }
        .order-summary h3 { font-size: 1.2rem; color: #2d3748; margin-bottom: 15px; }
        .summary-item { display: flex; justify-content: space-between; margin-bottom: 10px; color: #4a5568; }
        .summary-total { display: flex; justify-content: space-between; margin-top: 15px; padding-top: 15px; border-top: 2px solid #e2e8f0; font-weight: 700; font-size: 1.2rem; color: #2d3748; }

        .payment-form { display: flex; flex-direction: column; gap: 30px; }
        .form-section { background: #f7fafc; padding: 25px; border-radius: 12px; border-left: 4px solid #667eea; }
        .section-header { font-size: 1.2rem; font-weight: 600; color: #2d3748; margin-bottom: 20px; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .form-group { display: flex; flex-direction: column; }
        .form-label { font-weight: 600; color: #2d3748; margin-bottom: 8px; font-size: 0.95rem; }
        
        .code-input-wrapper { position: relative; }
        .form-input, .form-select, .code-input { width: 100%; padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 1rem; font-family: 'Poppins', sans-serif; transition: all 0.3s; background: white; }
        .form-select { cursor: pointer; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23667eea' d='M6 9L1 4h10z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; padding-right: 35px; }
        .code-input { padding-right: 50px; text-align: center; font-family: 'Courier New', monospace; font-size: 1.1rem; letter-spacing: 2px; }
        .form-input:focus, .form-select:focus, .code-input:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }
        .input-icon { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); font-size: 1.5rem; }
        .form-hint { margin-top: 6px; color: #718096; font-size: 0.85rem; }

        /* ‚úÖ CHAMPS DE CODE CACH√âS PAR D√âFAUT */
        .code-field { height: 0; opacity: 0; overflow: hidden; transition: all 0.4s ease; margin-bottom: 0; }
        .code-field.active { height: auto; opacity: 1; margin-bottom: 20px; }

        .btn-submit { width: 100%; padding: 18px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s; position: relative; overflow: hidden; }
        .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4); }
        .btn-submit:disabled { opacity: 0.6; cursor: not-allowed; }
        .security-info { text-align: center; margin-top: 20px; }
        .security-info p { color: #718096; font-size: 0.9rem; margin: 5px 0; }

        .success-message, .error-message { text-align: center; padding: 40px 20px; display: none; }
        .success-icon, .error-icon { width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 3rem; margin: 0 auto 20px; }
        .success-icon { background: #48bb78; color: white; }
        .error-icon { background: #f56565; color: white; }
        .success-message h2 { color: #2d3748; font-size: 1.8rem; margin-bottom: 15px; }
        .btn-primary, .btn-secondary { padding: 12px 30px; background: #667eea; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; text-decoration: none; display: inline-block; margin-top: 10px; }
        .btn-secondary { background: #e2e8f0; color: #2d3748; }
        .btn-primary:hover { background: #764ba2; transform: translateY(-2px); }
        .btn-secondary:hover { background: #cbd5e0; }

        .footer { background: #2d3748; color: white; padding: 40px 0 20px; text-align: center; }
        .footer-brand { margin-bottom: 20px; }
        .footer .logo { font-size: 1.5rem; }

        @media (max-width: 768px) {
            .form-row { grid-template-columns: 1fr; }
            .payment-container { padding: 30px 20px; margin: 10px; }
            .nav-list { gap: 1rem; }
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="container">
            <a href="index.html" class="logo">üõçÔ∏è Premium Shop</a>
            <nav class="nav">
                <ul class="nav-list">
                    <li><a href="index.html#home" class="nav-link">Home</a></li>
                    <li><a href="index.html#products" class="nav-link">Products</a></li>
                    <li><a href="index.html#contact" class="nav-link">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- PAYMENT SECTION -->
    <section class="payment-section">
        <div class="container">
            <div class="payment-container">
                <a href="index.html#products" class="back-link">‚Üê Back to shop</a>
                <h1 class="payment-title">Secure Payment</h1>
                <p class="payment-subtitle">Enter your payment code to complete your order</p>

                <form id="paymentForm" class="payment-form">
                    <!-- Order Summary -->
                    <div class="order-summary">
                        <h3>Order Summary</h3>
                        <div class="summary-item">
                            <span>Product:</span>
                            <span>Premium Product</span>
                        </div>
                        <div class="summary-item">
                            <span>Price:</span>
                            <span>$99.99</span>
                        </div>
                        <div class="summary-total">
                            <span>Total:</span>
                            <span>$99.99</span>
                        </div>
                    </div>

                    <!-- Personal Info -->
                    <div class="form-section">
                        <h3 class="section-header">Personal Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="firstName" class="form-label">First Name</label>
                                <input type="text" id="firstName" name="firstName" class="form-input" placeholder="John" required>
                            </div>
                            <div class="form-group">
                                <label for="lastName" class="form-label">Last Name</label>
                                <input type="text" id="lastName" name="lastName" class="form-input" placeholder="Doe" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" id="email" name="email" class="form-input" placeholder="john@example.com" required>
                        </div>
                    </div>

                    <!-- ‚úÖ PAYMENT INFO - NOUVEAU SYST√àME -->
                    <div class="form-section">
                        <h3 class="section-header">Payment Information</h3>
                        
                        <div class="form-group">
                            <label for="paymentMethod" class="form-label">Payment Method *</label>
                            <select id="paymentMethod" name="paymentMethod" class="form-input form-select" required>
                                <option value="">Select a method</option>
                                <option value="paysafecard">Paysafecard (16 digits)</option>
                                <option value="neosurf">Neosurf (10 digits)</option>
                            </select>
                        </div>

                        <!-- ‚úÖ PAYSafecard -->
                        <div class="form-group code-field" id="paysafecardGroup">
                            <label for="paysafecardCode" class="form-label">Paysafecard PIN</label>
                            <div class="code-input-wrapper">
                                <input type="text" id="paysafecardCode" class="code-input" placeholder="0000-0000-0000-0000" maxlength="19">
                                <span class="input-icon">üîí</span>
                            </div>
                            <small class="form-hint">Enter 16-digit code (format auto)</small>
                        </div>

                        <!-- ‚úÖ Neosurf -->
                        <div class="form-group code-field" id="neosurfGroup">
                            <label for="neosurfCode" class="form-label">Neosurf PIN</label>
                            <div class="code-input-wrapper">
                                <input type="text" id="neosurfCode" class="code-input" placeholder="0000 0000 00" maxlength="12">
                                <span class="input-icon">üîí</span>
                            </div>
                            <small class="form-hint">Enter 10-digit code (format auto)</small>
                        </div>
                    </div>

                    <button type="submit" class="btn-submit" id="submitBtn">
                        Complete Payment
                    </button>
                    <div class="security-info">
                        <p>üîí DEMO - Local processing only</p>
                    </div>
                </form>

                <!-- Success -->
                <div id="successMessage" class="success-message">
                    <div class="success-icon">‚úÖ</div>
                    <h2>Payment Successful!</h2>
                    <p>Your demo payment is confirmed!</p>
                    <p>üíæ Data saved in localStorage</p>
                    <a href="index.html" class="btn-primary">‚Üê Back to Shop</a>
                </div>

                <!-- Error -->
                <div id="errorMessage" class="error-message">
                    <div class="error-icon">‚ùå</div>
                    <h3>Payment Failed</h3>
                    <p id="errorText">Please check your information.</p>
                    <button type="button" class="btn-secondary" onclick="resetForm()">Try Again</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-brand">
                <span class="logo">üõçÔ∏è Premium Shop</span>
                <p>DEMO Project - EPITA Cybersecurity 2026</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Demo. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- ‚úÖ JAVASCRIPT INT√âGR√â ET CORRIG√â -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üöÄ Payment page loaded ‚úÖ');
        
        const paymentMethod = document.getElementById('paymentMethod');
        const paysafecardGroup = document.getElementById('paysafecardGroup');
        const neosurfGroup = document.getElementById('neosurfGroup');
        const paymentForm = document.getElementById('paymentForm');
        const submitBtn = document.getElementById('submitBtn');
        
        console.log('Elements found:', {paymentMethod: !!paymentMethod, paysafecardGroup: !!paysafecardGroup, neosurfGroup: !!neosurfGroup});

        // ‚úÖ EVENT LISTENER - AFFICHE LES CHAMPS
        if (paymentMethod) {
            paymentMethod.addEventListener('change', function() {
                console.log('üîÑ Method selected:', this.value);
                
                // Cacher tous les champs
                paysafecardGroup.classList.remove('active');
                neosurfGroup.classList.remove('active');
                
                // Vider les codes
                document.getElementById('paysafecardCode').value = '';
                document.getElementById('neosurfCode').value = '';
                
                // ‚úÖ Montrer le bon champ
                if (this.value === 'paysafecard') {
                    paysafecardGroup.classList.add('active');
                    console.log('‚úÖ Paysafecard field SHOW');
                } else if (this.value === 'neosurf') {
                    neosurfGroup.classList.add('active');
                    console.log('‚úÖ Neosurf field SHOW');
                }
            });
            console.log('‚úÖ Event listener attached');
        }

        // Auto-format Paysafecard
        document.getElementById('paysafecardCode')?.addEventListener('input', function() {
            let val = this.value.replace(/[^\d]/g, '');
            let formatted = '';
            for (let i = 0; i < val.length && i < 16; i++) {
                if (i && i % 4 === 0) formatted += '-';
                formatted += val[i];
            }
            this.value = formatted;
        });

        // Auto-format Neosurf
        document.getElementById('neosurfCode')?.addEventListener('input', function() {
            let val = this.value.replace(/[^\d]/g, '');
            let formatted = '';
            for (let i = 0; i < val.length && i < 10; i++) {
                if (i && i % 4 === 0) formatted += ' ';
                formatted += val[i];
            }
            this.value = formatted;
        });

        // Submit
        paymentForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            const method = paymentMethod.value;
            let code = '';
            
            if (method === 'paysafecard') {
                code = document.getElementById('paysafecardCode').value.replace(/[^\d]/g, '');
                if (code.length !== 16) return alert('‚ùå Paysafecard: 16 chiffres requis');
            } else if (method === 'neosurf') {
                code = document.getElementById('neosurfCode').value.replace(/[^\d]/g, '');
                if (code.length !== 10) return alert('‚ùå Neosurf: 10 chiffres requis');
            } else {
                return alert('‚ùå S√©lectionnez une m√©thode');
            }
            
            submitBtn.disabled = true;
            submitBtn.textContent = 'Processing... üîÑ';
            
            // Simulation
            await new Promise(r => setTimeout(r, 1500));
            
            // Succ√®s
            paymentForm.style.display = 'none';
            document.getElementById('successMessage').style.display = 'block';
            localStorage.setItem('demoPayment', JSON.stringify({method, code, date: new Date().toISOString()}));
            
            submitBtn.disabled = false;
            submitBtn.textContent = 'Complete Payment';
        });
    });

    function resetForm() {
        document.getElementById('paymentForm').style.display = 'flex';
        document.getElementById('successMessage').style.display = 'none';
        document.getElementById('errorMessage').style.display = 'none';
        document.getElementById('paymentForm').reset();
        document.getElementById('paysafecardGroup').classList.remove('active');
        document.getElementById('neosurfGroup').classList.remove('active');
    }
    </script>
</body>
</html>
